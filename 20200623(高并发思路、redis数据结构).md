[参考链接](https://mp.weixin.qq.com/s/UcryHRKziXnE-jekZ76ATg)

#### 缓存

#### 降级

#### 限流
> 限流方法
> 1. 计数器，在一段时间内，进行计数，与阀值进行比较，到了时间临界点，将计数器清0,但是存在一个时间临界点的问题。举个栗子，在12:01:00到12:01:58这段时间内没有用户请求，然后在12:01:59这一瞬时发出100个请求，OK，然后在12:02:00这一瞬时又发出了100个请求。这里你应该能感受到，在这个临界点可能会承受恶意用户的大量请求，甚至超出系统预期的承受。
> 2. 滑动窗口，把固定时间片，进行划分，并且随着时间的流逝，进行移动。这些固定数量的可以移动的格子，将会进行计数判断阀值，因此格子的数量影响着滑动窗口算法的精度。
> 3. 漏桶,有一个固定的桶，进水的速率是不确定的，但是出水的速率是恒定的，当水满的时候是会溢出的。
> 4. 令牌桶,生成令牌的速度是恒定的，而请求去拿令牌是没有速度限制的。面对瞬时大流量，该算法可以在短时间内请求拿到大量令牌
> 限流工具：Guava RateLimiter

#### redis数据结构
##### string类型
> String类型的数据结构存储方式有三种int、raw、embstr
> 1. int，value为整数类型
> 2. raw, 字符串是一个字符串值并且长度大于32个字节,就会使用SDS（simple dynamic string）方式进行存储，并且encoding设置为raw
> 3. embstr, 字符串长度小于等于32个字节

##### hash类型
> Hash对象的实现方式有两种分别是ziplist、hashtable，其中hashtable的存储方式key是String类型的，value也是以key value的形式进行存储。
> hashtable用链地址法解决哈希冲突
> 压缩列表（ziplist）是一组连续内存块组成的顺序的数据结构，压缩列表能够节省空间，压缩列表中使用多个节点来存储数据
> 「压缩列表并不是以某种压缩算法进行压缩存储数据，而是它表示一组连续的内存空间的使用，节省空间」


##### list列表
> Redis中的列表在3.2之前的版本是使用ziplist和linkedlist进行实现的。在3.2之后的版本就是引入了quicklist
> linkedlist和quicklist的底层采用无环双向链表实现

##### Set集合
> Set的底层实现是hashtable和intset,inset也叫做整数集合，用于保存整数值的数据结构类型

##### ZSet集合
> 底层实现是ziplist和skiplist
> skiplist跳跃表基于有序单链表,跳跃表结点包含多少个指向后继元素的指针，是通过一个随机函数生成器得到的